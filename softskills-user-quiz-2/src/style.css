/* ==== Base / Theme ==== */
:root{
  --bg: #0a0b10;
  --bg2: #0c0d15;
  --glass: rgba(255,255,255,0.05);
  --ink: #eef2ff;
  --muted: #a5b4fc;
  --border: rgba(255,255,255,0.12);
  --brand: #7c3aed;       /* accent violet */
  --brand2: #60a5fa;      /* soft blue */
  --ok: #22c55e;
  --warn: #f59e0b;
  --err: #ef4444;
  --fs-scale: 1.12;
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  font-family: "Noto Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  margin:0; padding:24px;
  color:var(--ink);
  background:
    radial-gradient(800px 800px at 10% 0%, rgba(124,58,237,0.20), transparent 60%),
    radial-gradient(700px 700px at 100% 0%, rgba(96,165,250,0.15), transparent 50%),
    linear-gradient(180deg, var(--bg), var(--bg2));
  font: 17px/1.55 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    line-height: 1.65;
  letter-spacing: 0.1px;
}

/* ==== Layout ==== */
.app-header{
  display:flex; align-items:center; gap:12px;
  margin-bottom:16px;
}
.logo{ display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px;font-size: large; }
.logo .dot{ width:10px; height:10px; border-radius:50%; background:linear-gradient(180deg,var(--brand2), var(--brand)); box-shadow:0 0 14px rgba(124,58,237,.6); }

.status{
  margin-left:auto;
  padding:8px 12px;
  border:1px dashed var(--border);
  border-radius:12px;
  font-size: 1.0rem;
  color:var(--muted);
  backdrop-filter: blur(8px);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.03));
}
.status[data-type="error"]{ border-color:var(--err); color:#ffd6d6; }

.layout{
  display:grid; grid-template-columns: 320px 1fr; gap:16px;
}
#instructionsPanel {
  grid-column: 2 / 3;
  align-self: flex-start;
  max-width: 1000x;       /* για να μην απλώνεται σε όλο το πλάτος */
}
.instructions-note {
  margin-top: 10px;
  font-size: 0.9rem;
  color: #f4f5f6;
  line-height: 1.55;
}


@media (max-width: 900px) {
  #instructionsPanel {
    grid-column: 1 / -1;
    max-width: 100%;
  }
}

@media (max-width: 900px){
   body{ font-size: calc(16px * 1.18); }
  .layout{ grid-template-columns: 1fr; }
  .question h3{ font-size: 1.32rem; }
  .progress{ flex-direction: column; align-items:flex-start; gap:6px; padding: 2px 2px; }
  .status{ margin:0;  padding:0px 8px; font-size: 0.92rem;  }
  .badge.level{ font-size: 0.92rem; } 
  .badge{ font-size: 0.92rem;  }
}

/* ==== Panels / Glass ==== */
.panel{
  border:1px solid var(--border);
  border-radius:18px;
  background: var(--glass);
  box-shadow:
    0 1px 0 rgba(255,255,255,.04) inset,
    0 20px 40px rgba(0,0,0,.35);
  padding:16px;
}
.panel.sub{ background: rgba(255,255,255,0.035); }
.panel-title{ margin:0 0 10px; font-size:17px; color:#dfe6ff; }

.row{ display:flex; flex-direction:column; gap:6px; margin:12px 0; }
label{ color:#cbd5ff; font-size: 0.98rem; opacity:.85; }
input, select, textarea{
  width:100%;
  padding:12px;
  border:1px solid var(--border);
  border-radius:12px;
  background:rgba(0,0,0,.25);
  color:var(--ink);
  outline:none;
  font-size: 1rem; 
}
input[readonly]{ opacity:.95; }
.hint{ color:#aeb7df; opacity:.8; font-size:0.92rem; }

/* Hide dev rows nicely (JS θα κρύψει το apiBase ούτως ή άλλως) */
.dev-row{ opacity:.8; }

/* ==== Buttons ==== */
.buttons{ display:flex; gap:10px; margin-top:8px; }
.btn{
  padding:10px 14px;
  border:1px solid var(--border);
  border-radius:12px;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  color:var(--ink);
  cursor:pointer;
  transition: transform .08s ease, box-shadow .2s ease;
  font-size: 1rem;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 18px rgba(124,58,237,.15); }
.btn:disabled{ opacity:.6; cursor:not-allowed; box-shadow:none; }
.btn.primary{ border-color: rgba(124,58,237,.5); background: linear-gradient(180deg, rgba(124,58,237,.25), rgba(124,58,237,.15)); }
.btn.accent { border-color: rgba(96,165,250,.5); background: linear-gradient(180deg, rgba(96,165,250,.25), rgba(96,165,250,.12)); }
.btn.ghost  { background: rgba(255,255,255,.03); }

/* ==== Quiz header ==== */
.topline{ display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:10px; }
.progress{ display:flex; align-items:center; gap:10px; flex:1; }
.bar-wrap{ flex:1; height:10px; background:rgba(255,255,255,.06); border:1px solid var(--border); border-radius:999px; overflow:hidden; }
#bar{ height:100%; background: linear-gradient(90deg, var(--brand2), var(--brand)); }
.step{ color:#c7cff7; }

.meta{ display:flex; align-items:center; gap:10px; color:#d1d8ff; }
.badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:5px 12px; border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
  background: rgba(255,255,255,.06);
  font: size 0.98rem; color:#e6eaff;
}
.badge.level{
  background: linear-gradient(180deg, rgba(124,58,237,.28), rgba(124,58,237,.1));
  border-color: rgba(124,58,237,.5);
}

/* ==== Question ==== */
.question .qid{ color:#b8c0ef; font-size:12px; margin-bottom:4px; opacity:.85; }
.question h3{ margin:6px 0 8px; font-size:18px; letter-spacing:.2px; }

#answer{
  margin-top:8px;
  background: rgba(0,0,0,.2);
  border:1px solid var(--border);
  border-radius:12px;
  color:var(--ink);
}

/* ==== MC options ==== */
.mc-grid{
  display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:10px; margin:10px 0;
}
.mc-card{
  position:relative; padding:12px; border:1px solid var(--border); border-radius:14px;
  font-size: 1rem;
  background: rgba(255,255,255,.045);
  color:#f1f5ff; cursor:pointer; outline:none;
  transition: border-color .15s ease, box-shadow .15s ease, transform .06s ease;
}
.mc-card:hover{ border-color: rgba(96,165,250,.7); }
.mc-card.selected{
  border-color: rgba(124,58,237,.9);
  box-shadow: 0 0 0 2px rgba(124,58,237,.18) inset, 0 6px 22px rgba(124,58,237,.12);
  transform: translateY(-1px);
}
.mc-mark{
  position:absolute; top:10px; right:10px; width:10px; height:10px; border-radius:999px;
  background: linear-gradient(180deg, var(--brand2), var(--brand));
  box-shadow: 0 0 10px rgba(124,58,237,.55);
}
.mc-hidden-radio{ display:none; }
.mc-text{ line-height: 1.5; font-size: 0.98rem; }

/* ==== Actions ==== */
.actions{ display:flex; align-items:center; gap:10px; margin:10px 10px; }
.busy{ color:#b7c0f0; }

/* ==== Feedback Panel ==== */
.panel h4{ margin:0 0 8px; font-size:15px; color:#dfe6ff; }
.stats{ display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:10px; margin-bottom:8px; }
.stat label{ font-size:12px; color:#b8c0ef; }
.pill{
  display:inline-block; padding:5px 12px; border-radius:999px;
  background: rgba(255,255,255,.06);
  border:1px solid var(--border); color:#fefefe;
  font-size: 0.98rem;
}

.grid{ display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:12px; font-size: 0.98rem; }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; white-space:pre-wrap; font-size: 1rem; }
#keep, #change, #action, #drill, #fbText{ font-size: 1rem; }

/* ==== Modal (created by JS): #thanksBackdrop .modal .actions ==== */
.backdrop.show{ display:flex; }
.backdrop .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }

/* ==== Utilities ==== */
.hidden{ display:none !important; }
a{ color:#bcd4ff; text-decoration:none; }
a:hover{ text-decoration:underline; }

/* === Fly-to-dock ghost card (animation helper) === */
.ghost-card{
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%,-50%) scale(0.98);
  width: 640px; /* θα γίνουν override από JS για να ταιριάζει στο panel */
  max-width: 92vw;
  height: 420px; /* override από JS */
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(8px);
  box-shadow:
    0 1px 0 rgba(255,255,255,.04) inset,
    0 20px 40px rgba(0,0,0,.35);
  opacity: 0;
  z-index: 999;
  pointer-events: none;
  display: grid;
  place-items: center;
}
.ghost-card .ghost-inner{
  color: #e6eaff;
  font-weight: 600;
  letter-spacing: .2px;
  text-align: center;
  opacity: .9;
}
.ghost-card.show{
  animation: flyToDock 0.8s ease forwards;
}
.animatable{
  transition: transform 520ms cubic-bezier(.2,.8,.2,1);
  will-change: transform;
}
/* Δεξιά στήλη — Intro & Quiz στην ίδια θέση (εναλλάσσονται) */
.intro-panel{ grid-column: 2 / 3; grid-row: 1; display:flex; flex-direction:column; gap:14px; justify-content:center; min-height: 260px; }
#quizBox{ grid-column: 2 / 3; grid-row: 1; }

/* Τυπογραφία Intro */
.intro-title{ font-size: clamp(22px, 3.2vw, 32px); margin:0; letter-spacing:.2px; }
.intro-lead{ font-size: clamp(15px, 1.4vw, 18px); color:#cbd5ff; opacity:.95; line-height:1.65; }

.intro-heading{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.phase-badge{
  padding:4px 12px;
  border-radius:999px;
  font-size:0.8rem;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(124,58,237,.18);
  color:#e5e7ff;
  align-self: flex-start;
}


/* Fade-out όταν ξεκινά το quiz */
.intro-hide{
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity .35s ease, transform .35s ease;
}

/* Ομαλή κίνηση Ρυθμίσεων (το έχουμε ήδη) */
.animatable{
  transition: transform 520ms cubic-bezier(.2,.8,.2,1);
  will-change: transform;
}
/* Κλείδωσε τις Ρυθμίσεις στη θέση τους (μηδένισμα τυχόν transform από παλιό JS) */
#settingsPanel{ transform: none !important; }

/* Intro και Quiz μοιράζονται τη δεξιά στήλη */
.intro-panel{ grid-column: 2 / 3; grid-row: 1; }
#quizBox{ grid-column: 2 / 3; grid-row: 1; }

/* Fade-out του Intro όταν ξεκινάμε */
.intro-hide{
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity .35s ease, transform .35s ease;
}
/* --- Result panel polish --- */
.result-wrap{
  opacity: 0; transform: translateY(4px);
  transition: opacity .25s ease, transform .25s ease;
}
.result-wrap:not(.hidden){ opacity: 1; transform: translateY(0); }

.result-header{
  display:flex; align-items:center; justify-content:space-between; gap:14px;
  margin-bottom:10px;
}
.kpi{ display:flex; align-items:center; gap:10px; }
.kpi-circle{
  width:54px; height:54px; border-radius:999px;
  display:grid; place-items:center;
  background:
    radial-gradient(closest-side, rgba(0,0,0,.35) 70%, transparent 71%),
    conic-gradient(from 140deg, rgba(124,58,237,.35), rgba(96,165,250,.35));
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 6px 22px rgba(124,58,237,.12) inset;
}
.kpi-circle span{ font-weight:700; font-size:18px; }
.kpi-label{ color:#c9d3ff; opacity:.9; font-size:12px; }

.chip-row{ display:flex; gap:8px; flex-wrap:wrap; }
.chip{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px;
  background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
  color:#e6eaff; font-size:12px;
}

.result-grid{
  display:grid; grid-template-columns: repeat(2, minmax(0,1fr));
  gap:12px; margin-top:6px;
}
@media (max-width: 900px){ .result-grid{ grid-template-columns: 1fr; } }

.result-card{
  padding:12px; border-radius:14px;
  background: rgba(255,255,255,.045);
  border:1.5px solid rgba(255,255,255,.10);
  min-height: 82px;
}
.result-card.keep   { border-color: rgba(22,163,74,.35); }
.result-card.change { border-color: rgba(239,68,68,.35); }
.result-card.action { border-color: rgba(96,165,250,.35); }
.result-card.drill  { border-color: rgba(124,58,237,.35); }

.rc-title{
  color:#cbd5ff; opacity:.95; font-weight:600; font-size:12px; letter-spacing:.2px;
  margin-bottom:6px;
}

.result-notes{
  margin-top:12px; padding:12px;
  border:1px dashed rgba(255,255,255,.12); border-radius:14px;
  background: rgba(255,255,255,.03);
}
.backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  display: grid;
  place-items: center;
  padding: 16px;              /* λίγο padding γύρω γύρω */
  z-index: 1000;
}

.backdrop .modal{
  width: min(960px, 96vw);    /* ΠΙΟ ΠΛΑΤΥ: μέχρι ~960px */
  max-height: 90vh;           /* να μην ξεπερνά το ύψος της οθόνης */
  background: rgba(22,22,27,.92);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 16px;
  backdrop-filter: blur(12px);
  color: #e7e8ee;
  box-shadow: 0 10px 40px rgba(0,0,0,.5);

  display: flex;              /* για να δουλέψει το flex */
  flex-direction: column;
  overflow: hidden;           /* scroll μόνο στο body */
}
.modal__header{ padding: 18px 22px 6px; }
.modal__body{
  padding: 6px 22px 8px;
  line-height: 1.55;
  flex: 1;              /* γεμίζει τον διαθέσιμο χώρο */
  overflow-y: auto;     /* scroll όταν είναι πολλά τα κείμενα */
}
.modal__actions{
  padding: 14px 22px 18px;
  display: flex; gap: 12px; justify-content: flex-end; flex-wrap: wrap;
  border-top: 1px solid rgba(255,255,255,.06);
}

.btn{
  font: inherit; cursor: pointer;
  padding: 10px 14px; border-radius: 10px;
  border: 1px solid transparent;
}
.btn.primary{
  border-color: rgba(124,58,237,.7);
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
  box-shadow: 0 10px 25px rgba(79,70,229,.35);
}

.btn.primary:hover{
  transform: translateY(-2px) scale(1.01);
  box-shadow: 0 12px 30px rgba(79,70,229,.45);
}

.btn.ghost{
  background: rgba(15,23,42,.85);
  border-color: rgba(148,163,184,.35);
}
.btn-secondary{ background: rgba(255,255,255,.08); color:#e7e8ee; border-color: rgba(255,255,255,.12); }
.btn-secondary:hover{ background: rgba(255,255,255,.12); }

/* ==== Instructions card (Left panel) ==== */

.instructions-panel {
  margin-top: 12px;
  padding: 16px 16px 14px;
  border-radius: 18px;
  border: 1px solid rgba(148,163,255,0.35); /* πιο φωτεινό border */
  background:
    radial-gradient(600px 600px at 0% 0%, rgba(96,165,250,0.16), transparent 60%),
    radial-gradient(500px 500px at 100% 100%, rgba(124,58,237,0.18), transparent 55%),
    rgba(15,23,42,0.85);
  box-shadow:
    0 1px 0 rgba(255,255,255,0.05) inset,
    0 16px 32px rgba(15,23,42,0.65);
  font-size: 0.96rem;
  line-height: 1.6;
}

/* Header πάνω από τις κουκκίδες */
.instructions-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 10px;
}

.instructions-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,255,0.45);
  background: rgba(15,23,42,0.85);
  font-size: 0.88rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: #e5e7ff;
}

.instructions-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--brand2), var(--brand));
  box-shadow: 0 0 10px rgba(129,140,248,0.9);
}

.instructions-hint {
  font-size: 0.82rem;
  color: #9ca3ff;
  opacity: 0.9;
}

/* Κείμενο εισαγωγής */
.instructions-intro {
  margin: 4px 0 8px;
  color: #e5e7ff;
  font-size: 0.95rem;
  opacity: 0.96;
}

/* Λίστα οδηγιών */
.instructions-list {
  margin: 6px 0 0 0;
  padding-left: 18px;
  color: #c7cff7;
}

.instructions-list li {
  margin-bottom: 4px;
}

.instructions-list b {
  color: #f9fafb;
}

/* Responsive tweak για κινητά */
@media (max-width: 900px) {
  .instructions-panel {
    font-size: 1rem;
    padding: 14px 14px 12px;
  }
}

.hidden { display: none !important; }

.intro-hide {
  opacity: 0 !important;
  transform: translateY(-4px) scale(.995);
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.coach-avatar {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.4rem;
  margin-top: 0.75rem;
}

.coach-avatar__bubble {
  width: 80px;
  height: 80px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at 30% 20%, #7c3aed, #111827);
  box-shadow: 0 0 18px rgba(124, 58, 237, 0.5);
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* idle “breathing” */
.coach-avatar__bubble--breathing {
  animation: coach-breathing 2.4s ease-in-out infinite;
}

/* όταν σκέφτεται */
.coach-avatar__bubble--thinking {
  animation: coach-pulse 1s ease-in-out infinite;
}

/* mood variations */
.coach-avatar__bubble--mood-happy {
  box-shadow: 0 0 20px rgba(45, 212, 191, 0.6);
}

.coach-avatar__bubble--mood-worried {
  box-shadow: 0 0 20px rgba(248, 113, 113, 0.6);
}

.coach-avatar__image {
  width: 68px;
  height: 68px;
  object-fit: contain;
  animation: coach-blink 6s linear infinite;
}

.coach-avatar__caption {
  font-size: 0.8rem;
  color: #e5e7eb;
  text-align: center;
  max-width: 220px;
  opacity: 0.9;
}


/* animations */
@keyframes coach-breathing {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes coach-pulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(0.95); }
  100% { transform: scale(1); }
}

@keyframes coach-blink {
  0%, 92%, 100% { transform: scale(1); }
  94%          { transform: scaleY(0.6); }
  96%          { transform: scaleY(1); }
}

