# app/core/questions.py
from typing import Dict, Any, List, Tuple
import random




# ------------------------------------------------------------
#  Ερωτήσεις ανά κατηγορία (πλουσιότερες MC επιλογές)
#  - Το "correct" είναι index στο "choices" ΠΡΙΝ το shuffle.
#  - Τα κείμενα περιέχουν keywords που αξιοποιεί το heuristic scoring:
#    • δομή/κριτήρια/ρόλοι/facilitation/feedback/σύνοψη/ερώτηση κατανόησης
#    • root-cause/υπόθεση/A/B/κριτήρια επιτυχίας/δοκιμές
#    • αποφυγή: πλειοψηφία, αυθεντία (manager decides), ταχύτητα > ποιότητα, τυχαία επιλογή
# ------------------------------------------------------------
QUESTIONS_PRE: Dict[str, Dict[str, List[Dict[str, Any]]]] = {
    "Communication": {
        "open": [
            {"id": "comm_open1", "text": "Περιγράψτε μια φορά που χρειάστηκε να ακούσετε κάποιον με τον οποίο διαφωνούσατε. Πώς διαχειριστήκατε τις αντιδράσεις σας;"},
            {"id": "comm_open2", "text": "Όταν μιλάτε με νέες γνωριμίες, πώς ξεκινάτε ή διατηρείτε τη συζήτηση;"},
            {"id": "comm_open3", "text": "Σκεφτείτε μια συζήτηση όπου τα συναισθήματα του συνομιλητή ήταν δύσκολο να κατανοηθούν. Πώς αντιδράσατε;"},
            {"id": "comm_open4", "text": "Πώς διασφαλίζετε ότι η γλώσσα του σώματός σας υποστηρίζει την επικοινωνία σας;"},
            {"id": "comm_open5", "text": "Πώς δίνετε συνήθως ανατροφοδότηση όταν κάποιος σας ανοίγεται για ένα πρόβλημα που αντιμετωπίζει;"},
            {"id": "comm_open6", "text": "Τι κάνετε όταν θέλετε να μιλήσετε αλλά ο άλλος δεν έχει τελειώσει ακόμα;"},
            {"id": "comm_open7", "text": "Πώς εκφράζετε τη διαφωνία σας κατά τη διάρκεια μιας συζήτησης χωρίς να προκαλέσετε ένταση;"},
            {"id": "comm_open8", "text": "Μοιραστείτε μια κατάσταση όπου συνοψίσατε αυτό που είπε κάποιος για να δείξετε ότι κατανοήσατε."},
            {"id": "comm_open9", "text": "Όταν γνωρίζετε ένα νέο άτομο, πώς αποφασίζετε τι προσωπικές πληροφορίες να μοιραστείτε;"},
            {"id": "comm_open10", "text": "Πώς αντιδράτε όταν κάποιος σας εμπιστεύεται κάτι συναισθηματικά δύσκολο;"},
            {"id": "comm_open11", "text": "Παράδειγμα όπου χρησιμοποίησες story arc (πρόβλημα→λύση→αποτέλεσμα) για να πείσεις."},
            {"id": "comm_open12", "text": "Πώς διαφοροποιείς το μήνυμα μεταξύ email, chat και live συνάντησης;"},
        ],
"mc": [
  {
    "id": "comm_mc1",
    "text": "Είστε σε ομαδική συνάντηση και ένας συνάδελφος εκφράζει την άποψή του. Τι κάνετε όταν διαφωνείτε;",
    "choices": [
      "Τον διακόπτετε για να τον διορθώσετε.",
      "Κυλάτε τα μάτια σας ελαφρώς.",
      "Τον/την αφήνετε να ολοκληρώσει και εκφράζετε ήρεμα τη δική σας άποψη στη συνέχεια.",
      "Φεύγετε από τη συνάντηση."
    ],
    "correct": 2
  },
  {
    "id": "comm_mc2",
    "text": "Σε τηλεδιάσκεψη παρατηρείτε ότι ένας συνάδελφος φαίνεται συναισθηματικά απόμακρος. Τι κάνετε;",
    "choices": [
      "Το αγνοείτε και συνεχίζετε το θέμα.",
      "Τον ρωτάτε με ήρεμο τρόπο πώς αισθάνεται και αν χρειάζεται κάτι.",
      "Τον επικρίνετε για τη σιωπή του μπροστά στην ομάδα.",
      "Κάνετε σαν να μη συμβαίνει τίποτα για να ‘μην χαλάσει η ροή’."
    ],
    "correct": 1
  },
  {
    "id": "comm_mc3",
    "text": "Συμμετέχετε σε έντονη συζήτηση και νιώθετε την ανάγκη να διακόψετε. Ποια είναι η πιο αποτελεσματική αντίδραση;",
    "choices": [
      "Τον/την διακόπτετε αμέσως για να διευκρινίσετε τη δική σας θέση.",
      "Μιλάτε πιο δυνατά ώστε να ακουστεί η άποψή σας.",
      "Τον/την αφήνετε να ολοκληρώσει και ζητάτε τον λόγο για να εκφράσετε τη θέση σας.",
      "Αποστρέφετε το βλέμμα και αποσύρεστε από τη συζήτηση."
    ],
    "correct": 2
  },
  {
    "id": "comm_mc4",
    "text": "Ένας συμφοιτητής σας εκμυστηρεύεται μια προσωπική δυσκολία. Ποια είναι μια κατάλληλη απάντηση ενεργητικής ακρόασης;",
    "choices": [
      "«Αυτό είναι δικό σου πρόβλημα, δεν μπορώ να βοηθήσω.»",
      "«Ακούγεται σαν να έχεις περάσει πολλή πίεση τελευταία.»",
      "«Εγώ είχα περάσει πολύ χειρότερα, δεν είναι κάτι ιδιαίτερο.»",
      "«Πάντα αυτά λες, δεν είναι κάτι νέο.»"
    ],
    "correct": 1
  },
  {
    "id": "comm_mc5",
    "text": "Σε εκδήλωση δικτύωσης, κάποιος σας χαιρετά θερμά. Τι δείχνει καλή επικοινωνία;",
    "choices": [
      "Κάνετε μόνο ένα σύντομο νεύμα και συνεχίζετε.",
      "Τον κοιτάτε στα μάτια, χαμογελάτε και ανταποδίδετε τον χαιρετισμό.",
      "Λέτε «γεια» κοιτώντας το κινητό σας.",
      "Τον αγνοείτε γιατί ‘βιάζεστε’."
    ],
    "correct": 1
  },
  {
    "id": "comm_mc6",
    "text": "Ο φίλος σας φαίνεται πληγωμένος από το feedback που του δώσατε. Πώς διορθώνετε την επικοινωνία;",
    "choices": [
      "Τον αποφεύγετε για να μη συζητήσετε το θέμα.",
      "Ζητάτε συγγνώμη για τον τρόπο, εξηγείτε την πρόθεσή σας και ρωτάτε πώς το βίωσε.",
      "Αμύνεστε και επιμένετε ότι ‘έτσι έπρεπε να το πείτε’.",
      "Αγνοείτε το θέμα ελπίζοντας ότι θα ξεχαστεί."
    ],
    "correct": 1
  },
  {
    "id": "comm_mc7",
    "text": "Ένα μέλος της ομάδας σας διστάζει να μιλήσει σε συναντήσεις. Πώς μπορείτε να το υποστηρίξετε;",
    "choices": [
      "Συνεχίζετε χωρίς να του δώσετε ποτέ τον λόγο.",
      "Το ρωτάτε ευγενικά για τη γνώμη του πάνω σε ένα συγκεκριμένο θέμα.",
      "Το φέρνετε σε δύσκολη θέση λέγοντας έντονα «πες κι εσύ κάτι».",
      "Το διακόπτετε όταν ξεκινήσει, για να συμπληρώσετε εσείς την ιδέα."
    ],
    "correct": 1
  },
  {
    "id": "comm_mc8",
    "text": "Νέος συνάδελφος εντάσσεται στο έργο σας. Ποια είναι η καλύτερη προσέγγιση γνωριμίας;",
    "choices": [
      "Περιμένετε να σας μιλήσει πρώτος κάποια στιγμή.",
      "Τον χαιρετάτε, συστήνεστε και τον ρωτάτε για κοινά ενδιαφέροντα/ρόλο στο έργο.",
      "Μιλάτε κυρίως για το δικό σας βιογραφικό και επιτυχίες.",
      "Του αναθέτετε αμέσως εργασίες χωρίς συζήτηση."
    ],
    "correct": 1
  },
  {
    "id": "comm_mc9",
    "text": "Δεν είστε βέβαιοι ότι καταλάβατε σωστά τι ήθελε να πει κάποιος. Ποια είναι η καλύτερη κίνηση;",
    "choices": [
      "Υποθέτετε τι εννοούσε και συνεχίζετε.",
      "Παραφράζετε με δικά σας λόγια αυτό που ακούσατε και ζητάτε επιβεβαίωση.",
      "Δεν λέτε τίποτα για να μη φανεί ότι δεν καταλάβατε.",
      "Αλλάζετε θέμα για να αποφύγετε τη διευκρίνιση."
    ],
    "correct": 1
  },
  {
    "id": "comm_mc10",
    "text": "Ένας συμφοιτητής εκφράζει ότι νιώθει πίεση από τον φόρτο εργασίας. Ποια είναι μια ενσυναισθητική απάντηση;",
    "choices": [
      "«Όλοι είμαστε κουρασμένοι, δεν είναι κάτι ιδιαίτερο.»",
      "«Σε ακούω – αυτό ακούγεται πραγματικά πολύ πιεστικό.»",
      "«Δεν είναι τόσο δύσκολο, υπερβάλλεις λίγο.»",
      "«Γιατί δεν προγραμμάτισες καλύτερα τον χρόνο σου;»"
    ],
    "correct": 1
  }
],
    },

    "Teamwork": {
        "open": [
            {"id": "team_open1", "text": "Περιγράψτε μια φορά που βοηθήσατε την ομάδα σας να παραμείνει εντός χρονοδιαγράμματος. Ποιες συγκεκριμένες ενέργειες κάνατε για να συντονίσετε τις εργασίες;"},
            {"id": "team_open2", "text": "Όταν η ομάδα σας αντιμετώπισε μια παρεξήγηση ή διαφωνία, πώς συμβάλατε στην επίλυση της κατάστασης;"},
            {"id": "team_open3", "text": "Πώς διασφαλίζετε ότι όλα τα μέλη της ομάδας μηχανικών έχουν την ευκαιρία να εκφράσουν ιδέες;"},
            {"id": "team_open4", "text": "Σκεφτείτε την τελευταία ανατροφοδότηση που λάβατε από έναν συμφοιτητή. Πώς την αξιοποιήσατε;"},
            {"id": "team_open5", "text": "Πώς αποφασίζετε ποιο ρόλο θα αναλάβετε σε μια νέα ομάδα έργου (ηγέτης, σχεδιαστής, αναλυτής κ.λπ.);"},
            {"id": "team_open6", "text": "Περιγράψτε ένα παράδειγμα όπου υποστηρίξατε έναν συμφοιτητή που αντιμετώπιζε τεχνική δυσκολία ή πίεση χρόνου."},
            {"id": "team_open7", "text": "Ποια βήματα ακολουθείτε για να διασφαλίσετε ότι η επικοινωνία σας με τα μέλη της ομάδας είναι σαφής και επαγγελματική (π.χ. σε συναντήσεις ή μηνύματα);"},
            {"id": "team_open8", "text": "Πώς διαχειρίζεστε καταστάσεις όπου η δική σας εργασία εξαρτάται από κάποιον άλλο που καθυστερεί;"},
            {"id": "team_open9", "text": "Περιγράψτε κάτι που έκανε η ομάδα σας για να δημιουργήσει ένα θετικό και παραγωγικό περιβάλλον κατά τη διάρκεια μιας δύσκολης φάσης του έργου."},
            {"id": "team_open10", "text": "Τι μάθατε για τον εαυτό σας ως μέλος ομάδας σε αυτό το έργο και τι θα θέλατε να βελτιώσετε την επόμενη φορά;"},
            {"id": "team_open11", "text": "Πώς οργανώνεις ‘ways of working’ ώστε να μειωθούν παρεξηγήσεις;"},
            {"id": "team_open12", "text": "Η ομάδα σου καθυστερεί να παραδώσει μια εργασία. Θέλεις να τους παρακινήσεις χωρίς να ακουστείς αυστηρός. Τι θα έλεγες;"},
        ],
"mc": [
    {
        "id": "team_mc1",
        "text": "Ένα μέλος της ομάδας καθυστερεί συνεχώς τις αναφορές προόδου. Ως συντονιστής έργου, τι πρέπει να κάνετε πρώτα;",
        "choices": [
            "Να το αναφέρετε στον διδάσκοντα",
            "Να συζητήσετε ιδιωτικά τα αίτια και να προσφέρετε βοήθεια",
            "Να του αναθέσετε τα καθήκοντα άλλων",
            "Να αγνοήσετε το ζήτημα"
        ],
        "correct": 1
    },
    {
        "id": "team_mc2",
        "text": "Ο κώδικας του συμφοιτητή σας προκαλεί σφάλματα στο σύστημα. Ποιος είναι ο πιο εποικοδομητικός τρόπος να αντιδράσετε;",
        "choices": [
            "Να το διορθώσετε μόνοι σας",
            "Να στείλετε θυμωμένα μηνύματα",
            "Να συζητήσετε το θέμα και να προσφέρετε βοήθεια για αποσφαλμάτωση",
            "Να παραπονεθείτε στον διδάσκοντα"
        ],
        "correct": 2
    },
    {
        "id": "team_mc3",
        "text": "Δύο φοιτητές διαφωνούν για μια σχεδιαστική προσέγγιση. Ποια είναι η καλύτερη ενέργεια συντονισμού;",
        "choices": [
            "Επιλέγετε εσείς ποια προτιμάτε",
            "Συγκαλείτε σύντομη συνάντηση για να ορίσετε κριτήρια και να επιδιώξετε συναίνεση",
            "Ψηφίζετε άμεσα",
            "Αφήνετε τους δύο να διαφωνούν"
        ],
        "correct": 1
    },
    {
        "id": "team_mc4",
        "text": "Η ομάδα σας μένει πίσω στο χρονοδιάγραμμα. Ποια ενέργεια ενισχύει καλύτερα τον συντονισμό;",
        "choices": [
            "Να δουλέψετε μόνοι σας περισσότερες ώρες",
            "Να επαναπροσδιορίσετε καθήκοντα και να ορίσετε νέα ορόσημα με την ομάδα",
            "Να παραπονεθείτε για άλλους",
            "Να παραλείψετε δευτερεύουσες συναντήσεις"
        ],
        "correct": 1
    },
    {
        "id": "team_mc5",
        "text": "Παρατηρείτε ότι ένα μέλος δεν συνεισφέρει ποτέ ιδέες στις συναντήσεις. Ποια είναι η καλύτερη αντίδραση;",
        "choices": [
            "Να του αναθέσετε απλές εργασίες",
            "Να ζητήσετε τη γνώμη του για συγκεκριμένα θέματα",
            "Να το αγνοήσετε",
            "Να του ασκήσετε κριτική"
        ],
        "correct": 1
    },
    {
        "id": "team_mc6",
        "text": "Ένα μέλος είναι αρνητικό στις προτάσεις των άλλων. Πώς ενισχύετε ένα θετικό κλίμα ομάδας;",
        "choices": [
            "Να διαφωνήσετε δημόσια",
            "Να συζητήσετε ιδιωτικά για τον τόνο του και να δώσετε παράδειγμα θετικής ανατροφοδότησης",
            "Να το αποφύγετε",
            "Να το αναφέρετε άμεσα στον διδάσκοντα"
        ],
        "correct": 1
    },
    {
        "id": "team_mc7",
        "text": "Κατά τον σχεδιασμό εντοπίζετε διαφορετικές ερμηνείες της εκφώνησης. Τι πρέπει να κάνετε;",
        "choices": [
            "Να θεωρήσετε ότι η δική σας ερμηνεία είναι η σωστή",
            "Να διευκρινίσετε τους στόχους και να καταγράψετε τι συμφωνήθηκε",
            "Να προχωρήσετε χωρίς σαφήνεια",
            "Να περιμένετε τον διδάσκοντα"
        ],
        "correct": 1
    },
    {
        "id": "team_mc8",
        "text": "Ο συμφοιτητής σας διαφωνεί με την ανατροφοδότηση που του δώσατε. Ποιο είναι το καλύτερο επόμενο βήμα;",
        "choices": [
            "Να επιμείνετε στη θέση σας",
            "Να ακούσετε και να επιδιώξετε κοινή κατανόηση",
            "Να αποσύρετε την ανατροφοδότηση",
            "Να το αναφέρετε στον επιβλέποντα"
        ],
        "correct": 1
    },
    {
        "id": "team_mc9",
        "text": "Μια τελευταία αλλαγή στο εύρος αυξάνει τον φόρτο εργασίας. Ποια είναι η πιο αποτελεσματική αντίδραση;",
        "choices": [
            "Να επαναπροσδιορίσετε ρόλους και να αναδιανείμετε τα καθήκοντα σε συνεργασία",
            "Να αφήσετε όλους να επιλέξουν ελεύθερα επιπλέον εργασίες",
            "Να αγνοήσετε τις νέες απαιτήσεις",
            "Να κατηγορήσετε τον πελάτη"
        ],
        "correct": 0
    },
    {
        "id": "team_mc10",
        "text": "Μετά την ολοκλήρωση ενός έργου, ποια είναι η καλύτερη ενέργεια παρακολούθησης;",
        "choices": [
            "Να διαγράψετε όλα τα αρχεία",
            "Να κάνετε ανασκόπηση με την ομάδα για τι λειτούργησε και τι μπορεί να βελτιωθεί",
            "Να προχωρήσετε αμέσως στο επόμενο",
            "Να εστιάσετε μόνο στον βαθμό"
        ],
        "correct": 1
    }
],
    },

    "Leadership": {
        "open": [
            {"id": "lead_open1", "text": "Περιγράψτε μια περίπτωση σε έργο όπου πήρατε την πρωτοβουλία να αλλάξετε την πορεία της ομάδας. Τι σας ώθησε και τι μάθατε από αυτή την εμπειρία;"},
            {"id": "lead_open2", "text": "Όταν αναθέτετε καθήκοντα σε ένα έργο, πώς αποφασίζετε ποιος θα κάνει τι; Ποιες προκλήσεις έχετε αντιμετωπίσει σε αυτή τη διαδικασία;"},
            {"id": "lead_open3", "text": "Πώς αντιδράτε συνήθως όταν λαμβάνετε εποικοδομητική κριτική από έναν συμφοιτητή ή εκπαιδευτή;"},
            {"id": "lead_open4", "text": "Δώστε ένα παράδειγμα όπου βοηθήσατε έναν συμφοιτητή να βελτιωθεί ή να αναπτύξει μια νέα δεξιότητα κατά τη διάρκεια της ομαδικής εργασίας."},
            {"id": "lead_open5", "text": "Σκεφτείτε ένα έργο που δεν εξελίχθηκε όπως είχε προγραμματιστεί. Πώς βοηθήσατε την ομάδα σας να ανακάμψει ή να προσαρμοστεί;"},
            {"id": "lead_open6", "text": "Ποια ηγετική δεξιότητα προσπαθήσατε συνειδητά να αναπτύξετε αυτό το εξάμηνο και πώς εργαστήκατε για αυτήν;"},
            {"id": "lead_open7", "text": "Πώς παρακινείτε τα μέλη της ομάδας σας όταν μειώνεται ο ενθουσιασμός ή οι προθεσμίες πλησιάζουν;"},
            {"id": "lead_open8", "text": "Ποιες συγκεκριμένες ενέργειες κάνετε για να χτίσετε εμπιστοσύνη και συνεργασία στην ομάδα έργου σας;"},
            {"id": "lead_open9", "text": "Πώς αξιολογείτε αν η ηγετική σας προσέγγιση σε ένα έργο ήταν αποτελεσματική;"},
            {"id": "lead_open10", "text": "Κατά τη γνώμη σας, τι διακρίνει έναν αποτελεσματικό ηγέτη  από έναν τεχνικά ικανό ηγέτη;"},
            {"id": "lead_open11", "text": "Πώς ισορροπείς ταχύτητα και ποιότητα σε δύσκολα deadlines;"},
        ],
        "mc": [
    {
        "id": "lead_mc1",
        "text": "Η ομάδα έργου καθυστερεί επειδή ένα μέλος είναι αποστασιοποιημένο. Τι πρέπει να κάνετε πρώτα;",
        "choices": [
            "Αναθέτετε τις εργασίες του στους άλλους",
            "Αγνοείτε το πρόβλημα — η ομάδα θα προσαρμοστεί",
            "Κάνετε μια ιδιωτική συζήτηση για να κατανοήσετε την κατάστασή του",
            "Τον/την επιπλήττετε δημόσια"
        ],
        "correct": 2
    },
    {
        "id": "lead_mc2",
        "text": "Λαμβάνετε feedback ότι η επικοινωνία σας είναι μερικές φορές ασαφής. Ποια είναι η καλύτερη αντίδραση;",
        "choices": [
            "Απορρίπτετε το σχόλιο ως υπερβολικό",
            "Ζητάτε συγκεκριμένα παραδείγματα για να το κατανοήσετε",
            "Υπερασπίζεστε τη θέση σας",
            "Αποφεύγετε να μιλάτε για να μην επαναληφθεί"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc3",
        "text": "Σε συνάντηση, δύο μέλη διαφωνούν έντονα για την κατεύθυνση σχεδιασμού. Τι κάνετε;",
        "choices": [
            "Αποφασίζετε μόνοι σας για να λήξει το θέμα",
            "Διευκολύνετε μια δομημένη συζήτηση ώστε να ακουστούν και οι δύο πλευρές",
            "Τους αφήνετε να ηρεμήσουν για μερικές μέρες",
            "Παίρνετε το μέρος της πλειοψηφίας"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc4",
        "text": "Σας ζητείται να ηγηθείτε έργου με άγνωστη τεχνολογία. Ποια είναι η καλύτερη προσέγγιση;",
        "choices": [
            "Αποφεύγετε την ευθύνη",
            "Ενημερώνεστε και εμπλέκετε άτομα με σχετική εμπειρία",
            "Κάνετε τα πάντα μόνοι σας",
            "Αναβάλετε αποφάσεις μέχρι να νιώσετε πλήρως έτοιμοι"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc5",
        "text": "Ένα μέλος σας δίνει αυστηρό feedback λίγο πριν την προθεσμία. Τι κάνετε;",
        "choices": [
            "Το αγνοείτε μέχρι την υποβολή",
            "Ακούτε, σημειώνετε και εφαρμόζετε ό,τι είναι ρεαλιστικό",
            "Υπερασπίζετε αμυντικά τη θέση σας",
            "Απορρίπτετε κάθε feedback υπό πίεση"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc6",
        "text": "Ένα μέλος σπάνια μιλάει στις συναντήσεις. Πώς πρέπει να ενεργήσετε;",
        "choices": [
            "Του αναθέτετε ασήμαντες εργασίες",
            "Ζητάτε ενεργά τη γνώμη του σε συγκεκριμένα θέματα",
            "Τον/την αποκλείετε από τον προγραμματισμό",
            "Υποθέτετε ότι συμφωνεί σιωπηρά"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc7",
        "text": "Διανέμετε εργασίες για ένα σύνθετο έργο. Ποια προσέγγιση είναι πιο αποτελεσματική;",
        "choices": [
            "Τυχαία ανάθεση",
            "Ανάθεση με βάση δεξιότητες και ανάγκες ανάπτυξης",
            "Επιτρέπετε σε όλους να διαλέξουν ελεύθερα",
            "Αναλαμβάνετε εσείς το δυσκολότερο μέρος"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc8",
        "text": "Στη μέση του έργου βλέπετε ότι το σχέδιο δεν καλύπτει τις απαιτήσεις. Τι κάνετε;",
        "choices": [
            "Συνεχίζετε χωρίς αλλαγές",
            "Κατηγορείτε εξωτερικούς παράγοντες",
            "Επαναξιολογείτε στόχους και προτείνετε αλλαγές με την ομάδα",
            "Περιμένετε παρέμβαση από τον επιβλέποντα"
        ],
        "correct": 2
    },
    {
        "id": "lead_mc9",
        "text": "Βλέπετε ότι μια άλλη ομάδα έχει εξαιρετικό σύστημα τεκμηρίωσης. Τι κάνετε;",
        "choices": [
            "Το αγνοείτε",
            "Τους ρωτάτε πώς το ανέπτυξαν και προσαρμόζετε την ιδέα",
            "Κριτικάρετε τη δική σας ομάδα",
            "Το αντιγράφετε χωρίς συνεννόηση"
        ],
        "correct": 1
    },
    {
        "id": "lead_mc10",
        "text": "Ολοκληρώνετε ένα μεγάλο έργο. Ποιο είναι το επόμενο βήμα ως ηγέτης;",
        "choices": [
            "Περνάτε αμέσως στο επόμενο έργο",
            "Συζητάτε με την ομάδα τι μάθατε",
            "Διαγράφετε τα αρχεία",
            "Εστιάζετε μόνο στον βαθμό σας"
        ],
        "correct": 1,
            },
        ],
    },

    "Problem Solving": {
        "open": [
            {"id": "prob_open1", "text": "Περιγράψτε ένα πρόσφατο πρόβλημα μηχανικής που αντιμετωπίσατε. Πόσο σίγουροι νιώσατε για την ικανότητά σας να το λύσετε και τι ενίσχυσε ή μείωσε αυτή την αυτοπεποίθηση;"},
            {"id": "prob_open2", "text": "Όταν λύνεις ένα πρόβλημα, πώς δημιουργείς και επιλέγεις ανάμεσα σε διαφορετικές πιθανές προσεγγίσεις;"},
            {"id": "prob_open3", "text": "Ποια είναι η συνήθης αντίδρασή σας όταν μια μέθοδος λύσης που δοκιμάσατε δεν αποδίδει;"},
            {"id": "prob_open4", "text": "Θυμηθείτε μια φορά που επιλύσατε επιτυχώς ένα τεχνικό πρόβλημα. Ανταποκρίθηκε το αποτέλεσμα στις προσδοκίες σας; Τι μάθατε από αυτή την εμπειρία;"},
            {"id": "prob_open5", "text": "Όταν αντιμετωπίζετε ένα σύνθετο ή άγνωστο πρόβλημα, ποια είναι τα πρώτα σας βήματα;"},
            {"id": "prob_open6", "text": "Πώς διαχειρίζεστε καταστάσεις όπου η πρώτη σας αντίδραση είναι να αποφύγετε ή να αναβάλετε την ενασχόληση με ένα πρόβλημα;"},
            {"id": "prob_open7", "text": "Πώς αποφασίζετε συνήθως αν θα ζητήσετε βοήθεια ή αν θα προσπαθήσετε να λύσετε ένα πρόβλημα μόνοι σας;"},
            {"id": "prob_open8", "text": "Τι ρόλο παίζει η γνώση μηχανικής που έχετε αποκτήσει στην προσέγγισή σας απέναντι σε νέα προβλήματα;"},
            {"id": "prob_open9", "text": "Αφού λύσετε ένα πρόβλημα, κάνετε ανασκόπηση της διαδικασίας; Γιατί ή γιατί όχι;"},
            {"id": "prob_open10", "text": "Περιγράψτε τη στρατηγική σας για να αναλύσετε ένα σύνθετο πρόβλημα μηχανικής σε επιμέρους διαχειρίσιμα μέρη."},
            {"id": "prob_open11", "text": "Πώς αποφασίζεις όταν τα δεδομένα είναι ατελή ή αμφίβολα;"},
        ],
        "mc": [
  {
    "id": "prob_mc1",
    "text": "Αντιμετωπίζετε ένα σφάλμα στον σχεδιασμό που δεν έχετε ξαναδεί. Ποιο είναι το πρώτο βήμα;",
    "choices": [
      "Περιμένετε μήπως το λύσει κάποιος άλλος.",
      "Δοκιμάζετε την πρώτη ιδέα που σας έρχεται στο μυαλό.",
      "Ορίζετε με σαφήνεια το πρόβλημα και εξετάζετε πιθανές αιτίες.",
      "Εφαρμόζετε μια λύση από άσχετη περίπτωση."
    ],
    "correct": 2,
  },
  {
    "id": "prob_mc2",
    "text": "Η πρώτη σας λύση δεν λειτούργησε. Τι κάνετε μετά;",
    "choices": [
      "Ζητάτε από άλλον να το αναλάβει.",
      "Αναδιατυπώνετε το πρόβλημα και δοκιμάζετε άλλη προσέγγιση.",
      "Επιμένετε στην ίδια λύση.",
      "Υποθέτετε ότι είναι άλυτο."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc3",
    "text": "Ξεκινάτε μια νέα εργασία. Ποια στάση είναι πιο αποτελεσματική;",
    "choices": [
      "Επιλέγετε πάντα την πιο οικεία μέθοδο.",
      "Εξετάζετε εναλλακτικές πριν δράσετε.",
      "Περιμένετε να σας υποδείξει άλλος τι να κάνετε.",
      "Χρησιμοποιείτε ό,τι δοκιμάσατε πιο πρόσφατα."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc4",
    "text": "Ένας συμφοιτητής ασκεί κριτική στην προσέγγισή σας. Πώς αντιδράτε;",
    "choices": [
      "Την αγνοείτε.",
      "Τη χρησιμοποιείτε για αναστοχασμό και βελτίωση της μεθόδου σας.",
      "Αντικρούετε αμέσως.",
      "Επιμένετε στο αρχικό σας σχέδιο."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc5",
    "text": "Δεν ξέρετε από πού να ξεκινήσετε για να διορθώσετε ένα νέο σφάλμα κυκλώματος. Ποια στρατηγική είναι καλύτερη;",
    "choices": [
      "Δοκιμάζετε τυχαίες λύσεις μέχρι να πετύχει κάποια.",
      "Ψάχνετε παρόμοια σφάλματα και ορίζετε το πρόβλημα πριν δράσετε.",
      "Περιμένετε βοήθεια.",
      "Αλλάζετε το θέμα του έργου."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc6",
    "text": "Μια εργασία σας φαίνεται υπερβολικά δύσκολη. Τι κάνετε;",
    "choices": [
      "Αποφεύγετε το πιο δύσκολο κομμάτι.",
      "Δοκιμάζετε ξανά και ξανά χωρίς να αλλάζετε στρατηγική.",
      "Τη σπάτε σε μικρότερα μέρη και εφαρμόζετε μεθοδική προσέγγιση.",
      "Ζητάτε από κάποιον άλλο να την ολοκληρώσει."
    ],
    "correct": 2,
  },
  {
    "id": "prob_mc7",
    "text": "Δύο λύσεις σας απέτυχαν στη σειρά. Ποιο είναι το καλύτερο επόμενο βήμα;",
    "choices": [
      "Υποθέτετε ότι δεν έχετε τις ικανότητες.",
      "Επαναξιολογείτε το πρόβλημα και εξερευνάτε νέα εναλλακτική.",
      "Κατηγορείτε τα εργαλεία σας.",
      "Σταματάτε να εργάζεστε μέχρι να βοηθήσει κάποιος."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc8",
    "text": "Ποια στάση δείχνει υγιή αυτοπεποίθηση στην επίλυση προβλημάτων;",
    "choices": [
      "Αποφεύγετε σύνθετα προβλήματα, εκτός αν σας καθοδηγούν.",
      "Πιστεύετε ότι μπορείτε να χρησιμοποιήσετε τις βασικές σας γνώσεις για να βρείτε ή να μάθετε λύση.",
      "Δράτε μόνο όταν σας λένε τι να κάνετε.",
      "Βασίζεστε κυρίως στη δοκιμή–λάθος αντί για σχεδιασμό."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc9",
    "text": "Ολοκληρώσατε ένα έργο. Τι βελτιώνει περισσότερο την απόδοσή σας στο μέλλον;",
    "choices": [
      "Προχωράτε στο επόμενο χωρίς ανασκόπηση.",
      "Ανασκοπείτε τι λειτούργησε και τι όχι, ώστε να βελτιώσετε την προσέγγισή σας.",
      "Διαγράφετε τις σημειώσεις σας.",
      "Το αφήνετε πίσω μέχρι το επόμενο έργο."
    ],
    "correct": 1,
  },
  {
    "id": "prob_mc10",
    "text": "Πρέπει να συγκρίνετε δύο πιθανές λύσεις. Τι σας βοηθά περισσότερο;",
    "choices": [
      "Επιλέγετε με βάση το ένστικτο.",
      "Επιλέγετε την πιο γρήγορη.",
      "Συγκρίνετε τα αναμενόμενα αποτελέσματα με την απαιτούμενη προσπάθεια.",
      "Ζητάτε από έναν φίλο να αποφασίσει."
    ],
    "correct": 2,
  },
],
    },
}

# ------------------------------------------------------------
#  Εναλλακτικές ερωτήσεις για το POST test
# ------------------------------------------------------------
QUESTIONS_POST: Dict[str, Dict[str, List[Dict[str, Any]]]] = {
    "Communication": {
    "open": [
        {"id": "comm_post_open1","text": "Σκέψου μια φορά που παρεξήγησες κάτι που είπε κάποιος. Πώς κατάλαβες ότι υπήρξε παρεξήγηση και τι έκανες για να αποκαταστήσεις την επικοινωνία;"},
        {"id": "comm_post_open2","text": "Πώς προσαρμόζεις συνήθως το επικοινωνιακό σου στυλ όταν συνεργάζεσαι με άτομα διαφορετικού υπόβαθρου ή ειδικότητας;"},
        {"id": "comm_post_open3","text": "Περιέγραψε μια κατάσταση όπου η μη λεκτική σου επικοινωνία (π.χ. τόνος φωνής, κινήσεις σώματος) είτε βοήθησε είτε δυσκόλεψε το μήνυμά σου."},
        {"id": "comm_post_open4","text": "Πώς αντιδράς όταν παρατηρείς ότι κάποιος σε μια συζήτηση αισθάνεται άβολα ή αποκλεισμένος;"},
        {"id": "comm_post_open5","text": "Ποια είναι η στρατηγική σου για να δίνεις εποικοδομητικό feedback χωρίς να ακούγεσαι επικριτικός ή επιθετικός;"},
        {"id": "comm_post_open6","text": "Περιέγραψε τι κάνεις για να διασφαλίζεις κοινή κατανόηση κατά τη διάρκεια ομαδικών συζητήσεων, ειδικά όταν υπάρχει πίεση χρόνου."},
        {"id": "comm_post_open7","text": "Πώς προσαρμόζεις τον τρόπο που επικοινωνείς όταν γράφεις, σε σύγκριση με όταν μιλάς απευθείας με τα μέλη της ομάδας;"},
        {"id": "comm_post_open8","text": "Τι κάνεις όταν παρατηρείς ότι κάποιο άτομο στην ομάδα φαίνεται αφηρημένο ή αποστασιοποιημένο κατά τη διάρκεια μιας συζήτησης;"},
        {"id": "comm_post_open9","text": "Μοίρασε ένα παράδειγμα όπου η περίληψη όσων είπε κάποιος βοήθησε να αποφευχθεί μια πιθανή παρεξήγηση."},
        {"id": "comm_post_open10","text": "Ποια σημάδια ή ενδείξεις αναζητάς για να επιβεβαιώσεις ότι το μήνυμά σου έχει γίνει πλήρως κατανοητό;"}
    ],
        "mc": [
    {
        "id": "comm_post_mc1",
        "text": "Ένα μέλος της ομάδας προτείνει μια ιδέα που δεν καταλαβαίνεις πλήρως. Τι κάνεις;",
        "choices": [
            "Κουνάς το κεφάλι και προχωράς.",
            "Ζητάς να την εξηγήσει και να δώσει περισσότερη σαφήνεια.",
            "Απορρίπτεις την ιδέα.",
            "Αλλάζεις θέμα."
        ],
        "correct": 1
    },
    {
        "id": "comm_post_mc2",
        "text": "Δίνεις ανατροφοδότηση σε έναν συμφοιτητή. Ποιος είναι ένας εποικοδομητικός τρόπος να ξεκινήσεις;",
        "choices": [
            "Ξεκινάς απαριθμώντας τα λάθη του.",
            "Τον ρωτάς πρώτα πώς ένιωσε με τη συμβολή του.",
            "Εστιάζεις στις δικές σου απογοητεύσεις.",
            "Κριτικάρεις δημόσια τη μέθοδό του."
        ],
        "correct": 1
    },
    {
        "id": "comm_post_mc3",
        "text": "Μιλάς σε μια ομαδική συνάντηση. Τι βοηθά να κρατήσεις το ενδιαφέρον των άλλων;",
        "choices": [
            "Μονότονος λόγος χωρίς έκφραση.",
            "Μιλάς πολύ γρήγορα για να τελειώσεις.",
            "Διαφοροποιείς τον τόνο και χρησιμοποιείς θετική γλώσσα σώματος.",
            "Διαβάζεις το κείμενο λέξη προς λέξη."
        ],
        "correct": 2
    },
    {
        "id": "comm_post_mc4",
        "text": "Κατά τη διάρκεια συζήτησης, ένας συμφοιτητής κάνει ειρωνικό σχόλιο. Ποια είναι μια καλή αντίδραση;",
        "choices": [
            "Απαντάς με ειρωνεία.",
            "Τον ρωτάς ιδιωτικά αν όλα είναι εντάξει.",
            "Το αγνοείς πλήρως.",
            "Γελάς ακόμη κι αν νιώθεις άβολα."
        ],
        "correct": 1
    },
    {
        "id": "comm_post_mc5",
        "text": "Ένα μέλος της ομάδας χρησιμοποιεί συχνά τεχνική ορολογία που οι υπόλοιποι δεν καταλαβαίνουν. Τι κάνεις;",
        "choices": [
            "Το αφήνεις να περάσει.",
            "Τον διορθώνεις δημόσια.",
            "Ζητάς διευκρίνιση και ενθαρρύνεις απλούστερους όρους.",
            "Αλλάζεις θέμα."
        ],
        "correct": 2
    },
    {
        "id": "comm_post_mc6",
        "text": "Κάποιος σε διακόπτει συνεχώς κατά τη διάρκεια μιας παρουσίασης. Πώς αντιδράς εποικοδομητικά;",
        "choices": [
            "Τον διακόπτεις κι εσύ.",
            "Παραμένεις ήρεμος και ζητάς να ολοκληρώσεις πριν δεχτείς ερωτήσεις.",
            "Σταματάς την παρουσίαση.",
            "Υψώνεις τη φωνή για να μιλήσεις από πάνω του."
        ],
        "correct": 1
    },
    {
    "id": "comm_post_mc7",
    "text": "Μιλάς σε μια ομάδα και παρατηρείς ότι μερικοί δείχνουν μπερδεμένοι. Ποια είναι η πιο αποτελεσματική κίνηση;",
    "choices": [
        "Να συνεχίσεις και να ελπίσεις ότι θα το καταλάβουν στη συνέχεια.",
        "Να σταματήσεις και να ρωτήσεις αν χρειάζονται διευκρίνιση ή περισσότερα παραδείγματα.",
        "Να δώσεις περισσότερες λεπτομέρειες χωρίς να ελέγξεις πρώτα τι δεν κατάλαβαν.",
        "Να αλλάξεις θέμα για να αποφύγεις πιθανή αμηχανία."
    ],
    "correct": 1
},
{
    "id": "comm_post_mc8",
    "text": "Ένα μέλος της ομάδας μοιράζεται ότι περνά προσωπική δυσκολία. Ποια είναι η πιο κατάλληλη αντίδραση;",
    "choices": [
        "Να του πεις ότι «όλοι περνάνε δυσκολίες» και να επιστρέψετε στη δουλειά.",
        "Να αναγνωρίσεις αυτό που μοιράστηκε και να ακούσεις ενεργά χωρίς να τον πιέσεις να πει περισσότερα.",
        "Να αλλάξεις θέμα ώστε να μη γίνει η συζήτηση άβολη.",
        "Να μοιραστείς αμέσως μια δική σου εμπειρία για να «νιώσει καλύτερα»."
    ],
    "correct": 1
},
{
    "id": "comm_post_mc9",
    "text": "Δεν είσαι βέβαιος ότι το μήνυμά σου έγινε κατανοητό. Πώς προχωράς με τον πιο αποτελεσματικό τρόπο;",
    "choices": [
        "Να επαναλάβεις το μήνυμα με τον ίδιο τρόπο, απλώς πιο αργά.",
        "Να ζητήσεις να σου πουν με δικά τους λόγια τι κατάλαβαν για να επιβεβαιώσεις την ευθυγράμμιση.",
        "Να θεωρήσεις ότι όλα είναι ξεκάθαρα, εκτός αν εμφανιστεί πρόβλημα.",
        "Να στείλεις ένα μακροσκελές μήνυμα συνοψίζοντας τα πάντα από την αρχή."
    ],
    "correct": 1
},
{
    "id": "comm_post_mc10",
    "text": "Κατά τη διάρκεια ομαδικής παρουσίασης, ο συνεργάτης σου μιλά πάνω από εσένα. Ποια είναι η πιο επαγγελματική αντίδραση;",
    "choices": [
        "Να υψώσεις ευγενικά τη φωνή σου ώστε να ακουστείς.",
        "Να τον διακόψεις άμεσα για να διατηρήσεις τον χρόνο ομιλίας σου.",
        "Να το συζητήσεις μαζί του μετά την παρουσίαση ώστε να συντονιστείτε καλύτερα στο μέλλον.",
        "Να αποφασίσεις να μην ξαναπαρουσιάσεις για να αποφύγεις εντάσεις."
    ],
    "correct": 2
}
],
    },
    "Teamwork": {
    "open": [
        {"id": "team_post_open1","text": "Πώς προσεγγίζεις καταστάσεις όπου τα μέλη της ομάδας συμμετέχουν σε άνισο βαθμό (άλλοι πολύ, άλλοι ελάχιστα);"},
        {"id": "team_post_open2","text": "Περιέγραψε μια φορά που βοήθησες να μεσολαβήσεις ή να μειωθεί η ένταση ανάμεσα σε μέλη της ομάδας. Τι είπες ή τι έκανες;"},
        {"id": "team_post_open3","text": "Πώς παίρνει συνήθως αποφάσεις η ομάδα σου και ποιον ρόλο έχεις εσύ σε αυτή τη διαδικασία;"},
        {"id": "team_post_open4","text": "Πώς διαχειρίζεστε εσύ και η ομάδα σου τη λογοδοσία όταν κάποιος δεν παραδίδει στην ώρα του;"},
        {"id": "team_post_open5","text": "Περιέγραψε μια πρακτική που χρησιμοποιεί η ομάδα σου για να παραμένει οργανωμένη και να παρακολουθεί την πρόοδο. Πόσο αποτελεσματική θεωρείς ότι είναι;"},
        {"id": "team_post_open6","text": "Πώς χτίζεις σχέση εμπιστοσύνης και καλή συνεργασία (rapport) σε μια νεοσύστατη ομάδα έργου;"},
        {"id": "team_post_open7","text": "Πώς αντιμετωπίζεις συνήθως μια κατάσταση όπου κάποιος διαφωνεί με την ιδέα σου κατά τη διάρκεια του ομαδικού σχεδιασμού;"},
        {"id": "team_post_open8","text": "Περιέγραψε πώς η ομάδα σου πήρε μια σημαντική απόφαση και πόσο δίκαιη και συμμετοχική ήταν η διαδικασία."},
        {"id": "team_post_open9","text": "Ποια εργαλεία ή στρατηγικές έχουν βοηθήσει την ομάδα σου να παραμένει ευθυγραμμισμένη σε έργα μεγάλης διάρκειας;"},
        {"id": "team_post_open10","text": "Με ποιους τρόπους έχεις συμβάλει στη δημιουργία ενός υποστηρικτικού και με σεβασμό περιβάλλοντος σε μια ομάδα με διαφορετικά υπόβαθρα και προσωπικότητες;"},

    ],
        "mc": [
    {
        "id": "team_post_mc1",
        "text": "Δύο μέλη της ομάδας αποδίδουν καλά ατομικά, αλλά αποφεύγουν συστηματικά τη συνεργασία. Πώς πρέπει να αντιδράσετε ως μέλος ή συντονιστής της ομάδας;",
        "choices": [
            "Τους αναθέτετε μόνιμα ξεχωριστά, ανεξάρτητα καθήκοντα.",
            "Ενθαρρύνετε μια κοινή εργασία και διευκρινίζετε τους κοινούς στόχους.",
            "Ζητάτε από άλλα μέλη να αναλάβουν τη συνεργασία στη θέση τους.",
            "Το αναφέρετε κατευθείαν στον διδάσκοντα."
        ],
        "correct": 1,
    },
    {
        "id": "team_post_mc2",
        "text": "Η ομάδα σας πρέπει να παραδώσει μια αναφορά, αλλά δεν είναι ξεκάθαρο ποιος έχει την ευθύνη της τελικής έκδοσης. Τι κάνετε;",
        "choices": [
            "Υποβάλλετε ό,τι έχετε έτοιμο μέχρι τώρα.",
            "Διευκρινίζετε και αναθέτετε άμεσα την ευθύνη της τελικής επιμέλειας.",
            "Αφήνετε τον διδάσκοντα να αποφασίσει ποιος είναι υπεύθυνος.",
            "Παραλείπετε την υποβολή."
        ],
        "correct": 1,
    },
    {
        "id": "team_post_mc3",
        "text": "Ένα μέλος ολοκληρώνει πάντα τις εργασίες του, αλλά σπάνια ενημερώνει την ομάδα για την πρόοδο. Πώς το διαχειρίζεστε;",
        "choices": [
            "Υποθέτετε ότι όλα είναι εντάξει, αφού η δουλειά ολοκληρώνεται.",
            "Ζητάτε τακτικές ενημερώσεις και προσφέρεστε να βοηθήσετε στον συντονισμό.",
            "Παρακολουθείτε ξεχωριστά την πρόοδό του χωρίς να το αναφέρετε.",
            "Εστιάζετε μόνο στο δικό σας κομμάτι και αγνοείτε το θέμα."
        ],
        "correct": 1,
    },
    {
        "id": "team_post_mc4",
        "text": "Κατά τη διάρκεια brainstorming, ένα ήσυχο μέλος προτείνει μια πολλά υποσχόμενη ιδέα. Ποια είναι η καλύτερη αντίδραση;",
        "choices": [
            "Προχωράτε γρήγορα στις ιδέες των πιο εκφραστικών μελών.",
            "Ευχαριστείτε το μέλος και ζητάτε περισσότερες λεπτομέρειες για την ιδέα.",
            "Επαναλαμβάνετε την ιδέα ως δική σας για να προχωρήσει πιο εύκολα.",
            "Κλείνετε τη συνάντηση, αφού βρέθηκε ‘μια καλή ιδέα’."
        ],
        "correct": 1,
    },
    {
        "id": "team_post_mc5",
        "text": "Η ομάδα σας ολοκληρώνει μια παρουσίαση νωρίτερα και περισσεύει χρόνος. Ποια είναι η πιο εποικοδομητική χρήση αυτού του χρόνου;",
        "choices": [
            "Φεύγετε νωρίτερα, αφού ‘όλα πήγαν καλά’.",
            "Κάνετε μια γρήγορη ανασκόπηση ατομικών συνεισφορών.",
            "Κάνετε σύντομο debrief: τι λειτούργησε, τι όχι και τι θα αλλάζατε την επόμενη φορά.",
            "Διαγράφετε τα κοινά αρχεία για να ‘καθαρίσει ο χώρος’."
        ],
        "correct": 2,
    },
    {
        "id": "team_post_mc6",
        "text": "Η ομάδα είναι διχασμένη ανάμεσα σε δύο εργαλεία, με έγκυρα επιχειρήματα και για τις δύο επιλογές. Ποια είναι η καλύτερη ενέργεια;",
        "choices": [
            "Αφήνετε τον πιο δυναμικό χαρακτήρα να πάρει την απόφαση.",
            "Χρησιμοποιείτε και τα δύο εργαλεία για να αποφύγετε τη σύγκρουση.",
            "Κάνετε μια γρήγορη ψηφοφορία χωρίς να ορίσετε κριτήρια.",
            "Επανεξετάζετε τις προτεραιότητες της ομάδας και συμφωνείτε σε κοινά κριτήρια επιλογής πριν αποφασίσετε."
        ],
        "correct": 3,
    },
    {
    "id": "team_post_mc7",
    "text": "Ένας συμφοιτητής σου φαίνεται ανασφαλής ή μπερδεμένος σχετικά με το καθήκον του. Ποια είναι η πιο εποικοδομητική αντίδραση;",
    "choices": [
        "Υποθέτεις ότι θα το καταλάβει μόνος του.",
        "Τον ρωτάς αν χρειάζεται διευκρινίσεις και προσφέρεις βοήθεια.",
        "Κάνεις εσύ το καθήκον του.",
        "Το αγνοείς."
    ],
    "correct": 1
},
{
    "id": "team_post_mc8",
    "text": "Υπάρχει ένταση στην ομάδα μετά από μια διαφωνία. Ποιο είναι το επόμενο βήμα που ενισχύει τη συνεργασία;",
    "choices": [
        "Αφήνεις την κατάσταση να λυθεί από μόνη της.",
        "Διευκολύνεις μια συζήτηση και επανακαθορίζεις τους κοινους στόχους.",
        "Παίρνεις το μέρος κάποιας πλευράς.",
        "Κλιμακώνεις άμεσα το ζήτημα σε ανώτερο επίπεδο."
    ],
    "correct": 1
},
{
    "id": "team_post_mc9",
    "text": "Συνειδητοποιείς ότι η ομάδα χάνει συνεχώς τα χρονοδιαγράμματα. Τι είναι πιο αποτελεσματικό να κάνεις;",
    "choices": [
        "Πιέζεις ατομικά τον κάθε έναν περισσότερο.",
        "Ενημερώνεις το πλάνο και συζητάς ξανά τις προτεραιότητες με όλη την ομάδα.",
        "Παραλείπεις ορισμένες εργασίες.",
        "Περιμένεις μέχρι να φτάσει η προθεσμία."
    ],
    "correct": 1
},
{
    "id": "team_post_mc10",
    "text": "Ένα μέλος της ομάδας δεν απαντά στο group chat. Ποια είναι η πιο σεβαστική και εποικοδομητική κίνηση;",
    "choices": [
        "Το κατηγορείς δημόσια στο chat.",
        "Επικοινωνείς ιδιωτικά και ρωτάς αν αντιμετωπίζει κάποια δυσκολία.",
        "Αναλαμβάνεις εσύ τις εργασίες του χωρίς να ρωτήσεις.",
        "Το αφαιρείς από την ομάδα."
    ],
    "correct": 1
}
],
    },
   "Leadership": {
    "open": [
        {"id": "lead_post_open1","text": "Περιέγραψε μια φορά που χρειάστηκε να ηγηθείς ομάδας σε τομέα όπου είχες περιορισμένη τεχνική γνώση. Πώς το αντιστάθμισες;"},
        {"id": "lead_post_open2","text": "Πώς χειρίζεσαι συνήθως την ανάθεση εργασιών όταν τα μέλη της ομάδας έχουν διαφορετικά δυνατά σημεία και επίπεδα εμπειρίας;"},
        {"id": "lead_post_open3","text": "Τι σε παρακινεί να αναλαμβάνεις ηγετικό ρόλο σε ένα νέο έργο ή καθήκον;"},
        {"id": "lead_post_open4","text": "Πώς βοηθάς τα μέλη της ομάδας σου να εξελιχθούν επαγγελματικά, ενώ ταυτόχρονα τηρούνται οι στόχοι του έργου;"},
        {"id": "lead_post_open5","text": "Τι κάνεις όταν μια ηγετική σου απόφαση δεν γίνεται αποδεκτή από την ομάδα; Πώς προχωράς στη συνέχεια;"},
        {"id": "lead_post_open6","text": "Περιέγραψε μια κατάσταση όπου οι ηγετικές σου αξίες αμφισβητήθηκαν. Πώς αντέδρασες;"},
        {"id": "lead_post_open7","text": "Πώς προσαρμόζεις το ηγετικό σου στυλ όταν συνεργάζεσαι με άτομα διαφορετικών προσωπικοτήτων ή επιπέδων δεξιοτήτων;"},
        {"id": "lead_post_open8","text": "Ποιες στρατηγικές χρησιμοποιείς για να ισορροπείς ανάμεσα στη διαχείριση εργασιών και στην υποστήριξη της δυναμικής της ομάδας;"},
        {"id": "lead_post_open9","text": "Περιέγραψε μια στιγμή όπου η ηγεσία σου βοήθησε την ομάδα να ξεπεράσει μια αποτυχία ή ένα πισωγύρισμα."},
        {"id": "lead_post_open10","text": "Πότε έχεις ηγηθεί μέσω παραδείγματος και ποιο ήταν το αποτέλεσμα στους συναδέλφους ή συμφοιτητές σου;"},


    ],
"mc": [
    {
        "id": "lead_post_mc1",
        "text": "Η ομάδα δυσκολεύεται επειδή οι εργασίες ανατέθηκαν χωρίς να ληφθούν υπόψη τα δυνατά σημεία του καθενός. Ποια είναι η καλύτερη ηγετική ενέργεια;",
        "choices": [
            "Να τους αφήσετε να αλλάξουν εργασίες κατά βούληση.",
            "Να επαναξιολογήσετε τις δεξιότητες και να αναθέσετε ξανά τους ρόλους με βάση τις ικανότητες.",
            "Να κρατήσετε τις ίδιες αναθέσεις για να μην υπάρξει καθυστέρηση.",
            "Να αναλάβετε εσείς τα πιο δύσκολα κομμάτια."
        ],
        "correct": 1
    },
    {
        "id": "lead_post_mc2",
        "text": "Ηγείστε μιας νέας ομάδας και δεν γνωρίζετε ακόμη τις ικανότητες των μελών. Ποιο είναι το πρώτο βήμα;",
        "choices": [
            "Τυχαία ανάθεση εργασιών.",
            "Να ρωτήσετε κάθε μέλος για τις δεξιότητες και τις προτιμήσεις του.",
            "Να αναλάβετε εσείς όλα τα βασικά καθήκοντα.",
            "Να τους αφήσετε να μοιράσουν τις εργασίες μόνοι τους."
        ],
        "correct": 1
    },
    {
        "id": "lead_post_mc3",
        "text": "Ένα νεότερο μέλος της ομάδας διστάζει να συνεισφέρει. Πώς ηγείστε αποτελεσματικά;",
        "choices": [
            "Του αναθέτετε μικρής σημασίας εργασίες.",
            "Το ενθαρρύνετε ζητώντας του τη γνώμη και υποστηρίζετε την προσπάθειά του.",
            "Το αγνοείτε μέχρι να μιλήσει.",
            "Κάνετε εσείς τη δουλειά του για να τελειώσει πιο γρήγορα."
        ],
        "correct": 1
    },
    {
        "id": "lead_post_mc4",
        "text": "Μετά από μια αποτυχημένη λύση, η ομάδα αποθαρρύνεται. Ποια είναι η κατάλληλη ηγετική αντίδραση;",
        "choices": [
            "Να τους επιπλήξετε.",
            "Να τονίσετε τι μάθατε από την αποτυχία και να καθοδηγήσετε έναν νέο, βελτιωμένο σχεδιασμό.",
            "Να αποφύγετε τη συζήτηση για την αποτυχία.",
            "Να πιέσετε για την ίδια λύση ξανά."
        ],
        "correct": 1
    },
    {
        "id": "lead_post_mc5",
        "text": "Σας ζητείται να ηγηθείτε ενός απαιτητικού έργου σε τομέα που δεν γνωρίζετε καλά. Πώς προχωράτε;",
        "choices": [
            "Αρνείστε τον ρόλο.",
            "Συντονίζετε την τεχνογνωσία της ομάδας και μαθαίνετε καθώς προχωρά το έργο.",
            "Αναθέτετε όλα τα τεχνικά καθήκοντα στους άλλους και μένετε hands-off.",
            "Εστιάζετε μόνο στις προθεσμίες."
        ],
        "correct": 1
    },
    {
        "id": "lead_post_mc6",
        "text": "Μία από τις προσωπικές σας αξίες συγκρούεται με απόφαση της ομάδας. Ποια είναι η καλύτερη ηγετική προσέγγιση;",
        "choices": [
            "Να καταπιέσετε τις ανησυχίες σας.",
            "Να εκφράσετε με σεβασμό τη θέση σας και να ανοίξετε συζήτηση για εναλλακτικές.",
            "Να επιβάλετε τη δική σας άποψη.",
            "Να αφήσετε την απόφαση σε κάποιον ανώτερο."
        ],
        "correct": 1
    },
    {
        "id": "lead_post_mc7",
        "text": "Η ομάδα σου δυσκολεύεται λόγω έλλειψης ξεκάθαρης κατεύθυνσης. Ως ηγέτης, ποιο είναι το σωστό πρώτο βήμα;",
        "choices": [
            "Αφήνεις την ομάδα να αποφασίσει μόνη της.",
            "Αναθέτεις τυχαίες εργασίες για να δεις τι θα λειτουργήσει.",
            "Διευκρινίζεις το όραμα και θέτεις κοινά καθορισμένους στόχους.",
            "Περιμένεις να αναλάβει κάποιος άλλος."
        ],
        "correct": 2
    },
    {
        "id": "lead_post_mc8",
        "text": "Θες να χτίσεις εμπιστοσύνη σε μια νέα ομάδα. Ποιο είναι το καλύτερο αρχικό βήμα;",
        "choices": [
            "Κρατάς την επικοινωνία στο ελάχιστο.",
            "Αποφεύγεις την ανάθεση για να έχεις τον πλήρη έλεγχο.",
            "Προγραμματίζεις ατομικές συναντήσεις και ξεκαθαρίζεις τις προσδοκίες.",
            "Εστιάζεις μόνο στις προθεσμίες."
        ],
        "correct": 2
    },
    {
        "id": "lead_post_mc9",
        "text": "Ένα μέλος της ομάδας έχει χάσει το κίνητρό του στη μέση του έργου. Ποιος είναι ο ρόλος σου ως ηγέτης;",
        "choices": [
            "Το αντικαθιστάς.",
            "Θέτεις αυστηρότερες προθεσμίες.",
            "Το παρακινείς δείχνοντάς του τη σημασία της συμβολής του στο τελικό αποτέλεσμα.",
            "Κάνεις εσύ το μέρος της δουλειάς του."
        ],
        "correct": 2
    },
    {
        "id": "lead_post_mc10",
        "text": "Μόλις ολοκλήρωσες με επιτυχία ένα έργο. Ποια είναι η καλύτερη τελική ηγετική ενέργεια;",
        "choices": [
            "Το γιορτάζεις μόνος σου.",
            "Διαγράφεις αρχεία.",
            "Κάνεις ανασκόπηση με την ομάδα και συλλέγεις feedback.",
            "Παίρνεις όλη την αναγνώριση και προχωράς."
        ],
        "correct": 2
    }
],
    },

"Problem Solving": {
    "open": [
        {"id": "prob_post_open1","text": "Περιγράψτε μια περίπτωση όπου ένας συμφοιτητής πρότεινε διαφορετική λύση από τη δική σας. Πώς αξιολογήσατε την προσέγγισή του/της και πώς αντιδράσατε;"},
        {"id": "prob_post_open2","text": "Πώς καταφέρνετε να παραμένετε συγκεντρωμένοι και παραγωγικοί όταν εργάζεστε σε ένα πρόβλημα που διαρκεί περισσότερο από όσο περιμένατε;"},
        {"id": "prob_post_open3","text": "Ποια συγκεκριμένα βήματα ακολουθείτε όταν δεν είστε σίγουροι ποια πληροφορία είναι πραγματικά σχετική για την επίλυση ενός τεχνικού προβλήματος;"},
        {"id": "prob_post_open4","text": "Πώς ισορροπείτε τη δημιουργικότητα με τη λογική όταν αναπτύσσετε λύσεις σε τεχνικές προκλήσεις;"},
        {"id": "prob_post_open5","text": "Έχετε ποτέ υποτιμήσει την πολυπλοκότητα ενός προβλήματος; Τι συνέβη και πώς προσαρμόσατε την προσέγγισή σας;"},
        {"id": "prob_post_open6","text": "Πώς αξιολογείτε αν μια επιλεγμένη λύση είναι αποτελεσματική πριν την εφαρμόσετε πλήρως;"},
        {"id": "prob_post_open7","text": "Πώς παρακολουθείς και αξιολογείς αν η λύση σου λειτουργεί αποτελεσματικά κατά τη διάρκεια της υλοποίησης;"},
        {"id": "prob_post_open8","text": "Περιέγραψε μια περίπτωση όπου επέλεξες μια μη συμβατική λύση και ανέλαβες ρίσκο. Τι καθοδήγησε την απόφασή σου;"},
        {"id": "prob_post_open9","text": "Πώς αποφασίζεις ποιοι πόροι (άνθρωποι, εργαλεία ή έρευνα) είναι οι πιο κατάλληλοι όταν αντιμετωπίζεις ένα νέο πρόβλημα;"},
        {"id": "prob_post_open10","text": "Ποια μοτίβα ή συνήθειες έχεις παρατηρήσει στον τρόπο με τον οποίο προσεγγίζεις προβλήματα που σου είναι άγνωστα;"},
    
    ],
                "mc": [
            {
                "id": "prob_post_mc1",
                "text": "Ένας συνάδελφος προτείνει μια λύση που δεν είχες σκεφτεί. Ποια είναι η καλύτερη αντίδραση;",
                "choices": [
                    "Την απορρίπτεις αν δεν ταιριάζει στο αρχικό σου πλάνο.",
                    "Ζητάς διευκρινίσεις και αξιολογείς τη βιωσιμότητά της.",
                    "Επιμένεις στην αρχική σου ιδέα.",
                    "Τους αφήνεις να την εφαρμόσουν μόνοι τους."
                ],
                "correct": 1,
            },
            {
                "id": "prob_post_mc2",
                "text": "Ξεκινάς ένα απαιτητικό project αλλά δεν ξέρεις από πού να αρχίσεις. Ποιο είναι το πιο αποτελεσματικό πρώτο βήμα;",
                "choices": [
                    "Προσπαθείς πρόχειρα οποιαδήποτε μέθοδο.",
                    "Το ‘σπας’ σε μέρη και εντοπίζεις τις βασικές μεταβλητές.",
                    "Ζητάς κατευθείαν την απάντηση από τον διδάσκοντα.",
                    "Ασχολείσαι με άσχετο μέρος του project."
                ],
                "correct": 1,
            },
            {
                "id": "prob_post_mc3",
                "text": "Η ομάδα πρέπει να λύσει ένα επαναλαμβανόμενο bug. Ποια είναι η πιο παραγωγική προσέγγιση;",
                "choices": [
                    "Δοκιμάζετε την τελευταία λειτουργική έκδοση και προχωράτε.",
                    "Εντοπίζετε μοτίβα, απομονώνετε μεταβλητές και δοκιμάζετε λύσεις.",
                    "Αφήνετε ένα άτομο να το χειριστεί μόνο του.",
                    "Ελπίζετε ότι την επόμενη φορά θα εξαφανιστεί."
                ],
                "correct": 1,
            },
            {
                "id": "prob_post_mc4",
                "text": "Νιώθεις μπλοκαρισμένος σε μια δύσκολη εργασία. Ποιο είναι το πιο ανθεκτικό, εποικοδομητικό επόμενο βήμα;",
                "choices": [
                    "Κάνεις αόριστο, μακρύ διάλειμμα.",
                    "Αλλάζεις μάθημα.",
                    "Ξαναδιατυπώνεις το πρόβλημα και δοκιμάζεις νέα προσέγγιση.",
                    "Αντιγράφεις από συμμαθητή."
                ],
                "correct": 2,
            },
            {
                "id": "prob_post_mc5",
                "text": "Έλυσες ένα σύνθετο πρόβλημα με επιτυχία. Τι κάνεις μετά;",
                "choices": [
                    "Διαγράφεις τη δουλειά σου.",
                    "Προχωράς αμέσως στο επόμενο.",
                    "Αναλογίζεσαι γιατί λειτούργησε η μέθοδός σου και την τεκμηριώνεις.",
                    "Προσπαθείς να το ξεχάσεις."
                ],
                "correct": 2,
            },
            {
                "id": "prob_post_mc6",
                "text": "Ένα μέλος της ομάδας επιμένει σε μια μέθοδο που έχει ήδη αποτύχει. Ποιος είναι ο κατάλληλος ρόλος σου;",
                "choices": [
                    "Τους αφήνεις να το δοκιμάσουν ξανά.",
                    "Τους ασκείς σκληρή κριτική.",
                    "Προτείνεις να επανεξετάσετε γιατί απέτυχε και να εξερευνήσετε εναλλακτικές μαζί.",
                    "Αγνοείς την άποψή τους."
                ],
                "correct": 2,
            },{
               "id": "prob_post_mc7",
               "text": "Αν συναντήσεις απροσδόκητα αποτελέσματα σε μια προσομοίωση, ποιο είναι το πιο αποτελεσματικό πρώτο βήμα;",
               "choices": [
                   "Να την ξανατρέξεις για να επιβεβαιώσεις το αποτέλεσμα πριν κάνεις οτιδήποτε άλλο.",
                   "Να εξετάσεις τις υποθέσεις, τις ρυθμίσεις των παραμέτρων και τα δεδομένα εισόδου για πιθανά λάθη.",
                   "Να θεωρήσεις ότι το λογισμικό ή το μοντέλο έχει σφάλμα και να προχωρήσεις με κάποια παράκαμψη.",
                   "Να ζητήσεις αμέσως από κάποιον άλλο να επιβεβαιώσει αν «έτσι λειτουργεί» η προσομοίωση."
                ],
               "correct": 1
           },
             {
               "id": "prob_post_mc8",
               "text": "Αν νιώθεις μπλοκαρισμένος στη μέση ενός project, ποιος είναι ο πιο αποτελεσματικός τρόπος να προχωρήσεις;",
               "choices": [
                  "Να συνεχίσεις να δουλεύεις πιο σκληρά στην ίδια προσέγγιση, ακόμη κι αν δεν φέρνει αποτέλεσμα.",
                  "Να αλλάξεις προσωρινά σε μια δεύτερη εργασία ώστε να διατηρήσεις την παραγωγικότητά σου.",
                  "Να κάνεις ένα βήμα πίσω, να επαναξιολογήσεις το πρόβλημα και να το επαναπροσδιορίσεις.",
                  "Να μαντέψεις μια λύση και να τη δοκιμάσεις γρήγορα για να «ξεκολλήσεις»."
                ],
                "correct": 1
        },
          {
            "id": "prob_post_mc9",
            "text": "Η λύση σου λειτουργεί μόνο μερικώς. Ποιο είναι το σωστό επόμενο βήμα;",
            "choices": [
                "Να την παραδώσεις όπως είναι και να αναφέρεις τους περιορισμούς κατά την παρουσίαση.",
                "Να αναλύσεις ποια μέρη απέτυχαν, να εντοπίσεις τις ρίζες του προβλήματος και να δοκιμάσεις εναλλακτικές προσεγγίσεις.",
                "Να επικεντρωθείς αποκλειστικά στο μέρος που λειτουργεί καλά και να αφήσεις τα υπόλοιπα για αργότερα.",
                "Να ξαναγράψεις ολόκληρη τη λύση από την αρχή χωρίς να εξετάσεις τι πήγε στραβά."
                ],
              "correct": 1
     },
        {
            "id": "prob_post_mc10",
            "text": "Ένα μέλος της ομάδας προτείνει μια διαφορετική μέθοδο από τη δική σου. Ποιο είναι το πιο εποικοδομητικό επόμενο βήμα;",
            "choices": [
                "Να αναγνωρίσεις ευγενικά την ιδέα αλλά να συνεχίσεις με τη δική σου μέθοδο.",
                "Να συγκρίνεις αντικειμενικά και τις δύο προσεγγίσεις και να αξιολογήσεις τα πλεονεκτήματα και τα μειονεκτήματα.",
                "Να παραμείνεις στη δική σου μέθοδο γιατί η αλλαγή κατεύθυνσης στη μέση της διαδικασίας είναι αναποτελεσματική.",
                "Να υιοθετήσεις αμέσως τη δική τους μέθοδο για να αποφύγεις συζήτηση ή πιθανή σύγκρουση."
                ],
               "correct": 1
    },
            
        ],
    }, 
}





# ------------------------------------------------------------
#  Story/Role/Tips/Coach metadata per question (non-breaking)
#  - context: short scenario line shown above the question
#  - roles: alternate role prompts to switch perspective
#  - tips: micro learning tips (we pick one randomly)
#  - coach: a small coach persona line to display after scoring
# ------------------------------------------------------------
SCENES = {
    # Communication
    "comm_open1": {
        "context": "Ετοιμάζεις ενημέρωση για stakeholders που δεν είναι τεχνικοί.",
        "roles": ["Ως εισηγητής", "Ως μέλος κοινού", "Ως συντονιστής"],
        "tips": ["Χρησιμοποίησε αναλογίες πριν από ορολογία.", "Κλείσε με 1 ερώτηση κατανόησης (teach-back)."],
        "coach": "Ωραίο πλαίσιο! Βάλε κι ένα οικείο παράδειγμα για γείωση."
    },
    "comm_open2": {
        "context": "Παρουσιάζεις σε δύο ομάδες με διαφορετικό υπόβαθρο.",
        "roles": ["Ως manager", "Ως νέος συνεργάτης"],
        "tips": ["Ρώτησε τις προσδοκίες στην αρχή.", "Μίλα στο επίπεδο κατανόησης του κοινού."],
        "coach": "Καλή προσαρμογή! Πρόσθεσε σύντομη σύνοψη μετά το pivot."
    },
    "comm_mc1": {
        "context": "Έχεις 5' να εξηγήσεις μια δύσκολη ιδέα.",
        "roles": ["Ως παρουσιάζων", "Ως ακροατής"],
        "tips": ["Ένα παράδειγμα > δέκα ορισμοί."],
        "coach": "Θυμήσου να ρωτήσεις μια ερώτηση κατανόησης."
    },
    "comm_mc2": {
        "context": "Παρατηρείς πτώση προσοχής.",
        "roles": ["Ως εισηγητής", "Ως συντονιστής"],
        "tips": ["Μικρή παύση + σύνοψη επαναφέρει το focus."],
        "coach": "Δώσε ξεκάθαρο επόμενο βήμα μετά τη σύνοψη."
    },

    # Leadership
    "lead_open1": {
        "context": "Δύο μέλη διαφωνούν για προτεραιότητες.",
        "roles": ["Ως team lead", "Ως ουδέτερος παρατηρητής"],
        "tips": ["Κράτα το πρόβλημα, όχι το άτομο, στο κέντρο."],
        "coach": "Ζήτα και από τους δύο να περιγράψουν ‘τι θα είχε επιτυχία’."
    },
    "lead_mc1": {
        "context": "Καλείσαι να μοιράσεις ρόλους σε tight deadline.",
        "roles": ["Ως PM", "Ως tech lead"],
        "tips": ["Σαφή κριτήρια + ιδιοκτησία = ροή."],
        "coach": "Διευκρίνισε ‘ποιος’, ‘πότε’, ‘τι σημαίνει done’."
    },

    # Teamwork
    "team_open1": {
        "context": "Η ομάδα δουλεύει απομακρυσμένα με θόρυβο πληροφοριών.",
        "roles": ["Ως scrum master", "Ως μέλος ομάδας"],
        "tips": ["Shared notes + async updates μειώνουν τριβές."],
        "coach": "Όρισε ‘source of truth’ για τις αποφάσεις."
    },
    "team_mc2": {
        "context": "Πρέπει να κάνεις alignment σε cross-team θέμα.",
        "roles": ["Ως facilitator", "Ως stakeholder"],
        "tips": ["Agenda + time-boxing κρατούν ενέργεια."],
        "coach": "Κλείσε με ιδιοκτησία δράσεων, όχι με ‘θα δούμε’."
    },

    # Problem Solving
    "prob_open1": {
        "context": "Ένα recurring bug επιστρέφει κάθε sprint.",
        "roles": ["Ως αναλυτής", "Ως developer"],
        "tips": ["5 Whys → root cause, όχι σύμπτωμα."],
        "coach": "Ορίσε κριτήρια επιτυχίας για την υπόθεση."
    },
    "prob_mc3": {
        "context": "Χρειάζεσαι data πριν την απόφαση.",
        "roles": ["Ως decision maker", "Ως data analyst"],
        "tips": ["Μικρό πείραμα > συζήτηση χωρίς δεδομένα."],
        "coach": "Διάλεξε την ελάχιστη δοκιμή που δίνει σήμα."
    },
}

import random as _rnd

def get_categories(phase: str = "PRE") -> List[str]:
    """
    Επιστρέφει διαθέσιμες κατηγορίες για το δοθέν phase.
    Σήμερα είναι ίδιες, αλλά το κρατάμε phase-aware για μελλοντική απόκλιση.
    """
    bank = QUESTIONS_POST if str(phase or "PRE").strip().upper() == "POST" else QUESTIONS_PRE
    return list(bank.keys())


def _merge_scene_fields(item_id: str) -> dict:
    meta = SCENES.get(item_id, {})
    out = {}
    if "context" in meta: out["context"] = meta["context"]
    if "roles" in meta: out["roles"] = meta["roles"]
    if "tips" in meta:
        tips = meta["tips"]
        out["tip"] = _rnd.choice(tips) if isinstance(tips, list) and tips else None
    if "coach" in meta: out["coach"] = meta["coach"]
    return out

# ------------------------------------------------------------
#  Βοηθητικές
# ------------------------------------------------------------
def _pick_random(pool: List[Dict[str, Any]], n: int) -> List[Dict[str, Any]]:
    if n <= 0:
        return []
    if n >= len(pool):
        return pool.copy()
    return random.sample(pool, n)

def _shuffle_choices(q: Dict[str, Any]) -> Tuple[List[str], int]:
    """Επιστρέφει (choices_shuffled, new_correct_index)."""
    choices = q["choices"].copy()
    correct_idx = q["correct"]
    correct_choice = choices[correct_idx]
    random.shuffle(choices)
    new_correct = choices.index(correct_choice)
    return choices, new_correct

def _get_phase_questions(category: str, phase: str) -> Dict[str, List[Dict[str, Any]]]:
    print(f"[DEBUG _get_phase_questions] phase={phase}")
    phase_norm = str(phase or "PRE").strip().upper()
    if phase_norm == "POST":
        return QUESTIONS_POST.get(category, {})
    return QUESTIONS_PRE.get(category, {})


def get_questions(category: str, qtype: str, n: int, phase: str = "PRE") -> List[Dict[str, Any]]:
    cat = _get_phase_questions(category, phase)
    if not cat:
        raise ValueError(f"Άγνωστη κατηγορία: {category}")
    pool = cat.get(qtype)
    if pool is None:
        raise ValueError(f"Άγνωστος τύπος: {qtype}")
    return _pick_random(pool, n)

# ------------------------------------------------------------
#  Block & 16-question quiz (2 open + 2 mc από κάθε κατηγορία)
# ------------------------------------------------------------
CATEGORIES_4 = ["Communication", "Teamwork", "Leadership", "Problem Solving"]

def build_quiz_block(category: str, hide_correct: bool = True, phase: str = "PRE") -> Dict[str, Any]:
    """Ακριβώς 2 open + 2 mc για μία κατηγορία."""
    open_src = get_questions(category, "open", 2, phase=phase)
    mc_src   = get_questions(category, "mc",   2, phase=phase)

    open_pub = [{"id": q["id"], "text": q["text"]} for q in open_src]

    mc_pub: List[Dict[str, Any]] = []
    for q in mc_src:
        choices, new_correct = _shuffle_choices(q)
        item = {"id": q["id"], "text": q["text"], "choices": choices}
        if not hide_correct:
            item["correct"] = new_correct
        mc_pub.append(item)

    return {"category": category, "open": open_pub, "mc": mc_pub}


def build_quiz_16(hide_correct: bool = True, shuffle_flat: bool = True, phase: str = "PRE") -> Dict[str, Any]:
    """
    Επιστρέφει quiz 16 ερωτήσεων:
    - 4 κατηγορίες x (2 open + 2 mc) = 16
    - επιστρέφει blocks ανά κατηγορία ΚΑΙ flat λίστα για σειριακή ροή στο UI
    """
    blocks: List[Dict[str, Any]] = [build_quiz_block(cat, hide_correct, phase=phase) for cat in CATEGORIES_4]

    flat: List[Dict[str, Any]] = []
    for b in blocks:
        for o in b["open"]:
            flat.append({"type": "open", "category": b["category"], **o})
        for m in b["mc"]:
            flat.append({"type": "mc", "category": b["category"], **m})

    if shuffle_flat:
        random.shuffle(flat)

    return {"mode": "standard16", "total": 16, "blocks": blocks, "flat": flat}


# ------------------------------------------------------------
#  Συμβατότητα με το υπάρχον endpoint /questions/bundle
# ------------------------------------------------------------
def build_bundle(
    category: str,
    n_open: int = 6,
    n_mc: int = 6,
    hide_correct: bool = True,
    phase: str = "PRE",
    attempt: int = 1,
) -> Dict[str, Any]:
    # Προαιρετικό debug (με εσοχή ΜΕΣΑ στη συνάρτηση)
    try:
        print(f"[DEBUG build_bundle] category={category}, phase={phase}, attempt={attempt}")
    except Exception:
        pass

    if category.upper() == "ALL":
        data = build_quiz_16(hide_correct=hide_correct, shuffle_flat=True, phase=phase)
        return {
            "category": "ALL",
            "open": [],
            "mc": [],
            "phase": phase,
            "attempt": attempt,
            **data,
        }

    open_src = get_questions(category, "open", n_open, phase=phase)
    mc_src   = get_questions(category, "mc",   n_mc,   phase=phase)

    open_pub = [{"id": q["id"], "text": q["text"]} for q in open_src]

    mc_pub: List[Dict[str, Any]] = []
    for q in mc_src:
        choices, new_correct = _shuffle_choices(q)
        item = {"id": q["id"], "text": q["text"], "choices": choices}
        if not hide_correct:
            item["correct"] = new_correct
        mc_pub.append(item)

    return {
        "category": category,
        "open": open_pub,
        "mc": mc_pub,
        "phase": phase,
        "attempt": attempt,
    }

QUESTIONS = QUESTIONS_PRE
QUESTION_BANK = QUESTIONS_PRE
get_question_categories = get_categories

